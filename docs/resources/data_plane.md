---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "tdh_data_plane Resource - tdh"
subcategory: ""
description: |-
  Represents a TDH Data Plane.
---

# tdh_data_plane (Resource)

Represents a TDH Data Plane.

## Example Usage

```terraform
data "tdh_provider_types" "all" {
}

data "tdh_cloud_accounts" "all" {
}

# For onboarding the data plane use the k8s cluster with the attribute "available" is set to true
# If onboarding data Plane on TDH Control Plane, use the k8s cluster with the attribute "cp_present" is set to true and "dp_present" is set to false
data "tdh_k8s_clusters" "all" {
  account_id = data.tdh_cloud_accounts.all.list[0].id
}

data "tdh_data_plane_helm_releases" "all" {

}

data "tdh_storage_policies" "all" {
  cloud_account_id = data.tdh_cloud_accounts.all.list[0].id
  k8s_cluster_name = data.tdh_k8s_clusters.all.list[0].name

}
output "resp" {
  value = data.tdh_storage_policies.all
}

output "data" {
  value = {
    provider_type  = data.tdh_cloud_accounts.all
    cloud_accounts = data.tdh_cloud_accounts.all
    k8s_clusters   = data.tdh_k8s_clusters.all
    helm_release   = data.tdh_data_plane_helm_releases.all
    storage_class  = data.tdh_storage_policies.all
  }
}


resource "tdh_data_plane" "example" {
  name                    = "dp_name-new"
  account_id              = data.tdh_cloud_accounts.all.list[0].id # this ID can be fetched from the datasource "tdh_cloud_accounts" . Provider type can be verifies using the 'provider_type' field
  k8s_cluster_name        = data.tdh_k8s_clusters.all.list[5].name # use datasource "tdh_k8s_clusters" to get the list of available K8s clusters.# For onboarding the data plane use the k8s cluster with the attribute "available" is set to tru. If onboarding Data Plane on TDH Control Plane, use the k8s cluster with the attribute "cp_present" is set to true and "dp_present" is set to false
  storage_classes         = [for storage_class in data.tdh_storage_policies.all.list : storage_class.name]
  backup_storage_class    = data.tdh_storage_policies.all.list[0].name       # name of the storage class to use for backups
  data_plane_release_id   = data.tdh_data_plane_helm_releases.all.list[0].id # use datasource "tdh_data_plane_helm_releases" to select one of the IDs
  shared                  = true
  org_id                  = null # setting this to particular Org ID will make it available to only that Org
  tags                    = ["dev-dp-terraform"]
  auto_upgrade            = false
  services                = data.tdh_data_plane_helm_releases.all.list[0].services # can be fetched from the response of "tdh_data_plane_helm_releases" services field
  cp_bootstrapped_cluster = false # set to true to Onboard Data Plane on TDH Control Plane
  configure_core_dns      = true

  // non editable fields, edit is not allowed
  lifecycle {
    ignore_changes = [
      k8s_cluster_name, account_id, provider_name, storage_classes, backup_storage_class, data_plane_release_id, shared,
      org_id, configure_core_dns, services, cp_bootstrapped_cluster
    ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `account_id` (String) ID of the account to use for data plane operations. Please use datasource `tdh_cloud_accounts` to get the list of available accounts.
- `auto_upgrade` (Boolean) Whether to enable auto-upgrade on Data plane
- `backup_storage_class` (String) Backup Storage Class will be used to create all backups on this data plane. Please note this cannot be changed in future.
- `data_plane_release_id` (String) ID of the Helm Release. Please use datasource `tdh_data_plane_helm_releases` to get this.
- `k8s_cluster_name` (String) Name of Kubernetes Cluster. Please use datasource `tdh_k8s_clusters` to get the list of available clusters from an account.
- `name` (String) Name of the Data Plane
- `services` (Set of String) Services
- `shared` (Boolean) Shared Data Plane
- `storage_classes` (Set of String) Storage Classes on the data plane

### Optional

- `configure_core_dns` (Boolean) Turn on publishing the TDH's DNS to core DNS of the K8S cluster. This will enable communication between pods of the control plane and the data plane with control plane pods. Disable this only when the TDH base URL has a forwarder set in corporate DNS or for some specific use case.
Please note that TDH needs these communications between the pods to function.
- `cp_bootstrapped_cluster` (Boolean) Whether to onboard Data Plane on a K8s cluster running TDH Control Plane
- `org_id` (String) Organization ID
- `tags` (Set of String) Tags

### Read-Only

- `id` (String) Auto-generated ID of the data plane after creation, and can be used to import it from TDH to terraform state.
- `provider_name` (String) Provider name

## Import

Import is supported using the following syntax:

```shell
# Data plane can be imported by specifying the UUID.
terraform import tdh_data_plane.example d3c49288-7b17-4e78-a6af-257b49e34e53
```
